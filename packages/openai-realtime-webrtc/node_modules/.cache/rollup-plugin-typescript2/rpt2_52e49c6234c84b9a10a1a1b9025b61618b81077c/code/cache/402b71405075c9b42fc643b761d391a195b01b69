{"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from 'eventemitter3';\nimport { WebRTCManager } from './WebRTCManager';\nexport class OpenAIRealtimeService extends EventEmitter {\n    constructor(config, events = {}) {\n        super();\n        this.audioElement = null;\n        this.isDisposed = false;\n        this.config = Object.assign({ tokenEndpoint: '/api/session', model: 'gpt-4o-realtime-preview-2024-12-17', voice: 'alloy', modalities: ['text', 'audio'], temperature: 0.8, maxOutputTokens: 4096, inputAudioFormat: 'pcm16', outputAudioFormat: 'pcm16', turnDetection: {\n                type: 'server_vad',\n                threshold: 0.5,\n                prefix_padding_ms: 300,\n                silence_duration_ms: 500\n            } }, config);\n        this.events = events;\n        this.state = {\n            status: 'disconnected',\n            messages: []\n        };\n        this.webrtcManager = new WebRTCManager(this.config);\n        this.setupWebRTCHandlers();\n    }\n    connect(audioElement) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            if (this.isDisposed) {\n                throw new Error('Service has been disposed');\n            }\n            if (this.state.status === 'connected' || this.state.status === 'connecting') {\n                return;\n            }\n            try {\n                this.updateStatus('connecting');\n                this.audioElement = audioElement || null;\n                this.log('Initializing WebRTC...');\n                yield this.webrtcManager.initialize();\n                this.updateStatus('connected');\n                this.emit('connected');\n                (_b = (_a = this.events).onConnect) === null || _b === void 0 ? void 0 : _b.call(_a);\n                this.log('Connected successfully');\n                setTimeout(() => {\n                    if (this.webrtcManager.isDataChannelOpen()) {\n                        this.sendSessionConfig().catch(err => {\n                            this.log('Session config failed (non-critical):', err);\n                        });\n                    }\n                }, 1000);\n            }\n            catch (error) {\n                this.updateStatus('error');\n                this.state.error = error instanceof Error ? error : new Error('Unknown error');\n                this.emit('error', this.state.error);\n                throw error;\n            }\n        });\n    }\n    updateInstructions(instructions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.config.instructions = instructions;\n            if (this.state.status === 'connected') {\n                yield this.sendSessionConfig();\n            }\n        });\n    }\n    sendText(text) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state.status !== 'connected') {\n                throw new Error('Not connected');\n            }\n            const message = {\n                type: 'conversation.item.create',\n                item: {\n                    type: 'message',\n                    role: 'user',\n                    content: [{\n                            type: 'input_text',\n                            text\n                        }]\n                }\n            };\n            this.webrtcManager.sendData(JSON.stringify(message));\n            this.webrtcManager.sendData(JSON.stringify({ type: 'response.create' }));\n            this.state.messages.push({\n                id: `msg-${Date.now()}`,\n                role: 'user',\n                text,\n                timestamp: Date.now()\n            });\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            if (this.state.status === 'disconnected') {\n                return;\n            }\n            yield this.webrtcManager.close();\n            if (this.audioElement) {\n                this.audioElement.srcObject = null;\n            }\n            this.updateStatus('disconnected');\n            this.emit('disconnected');\n            (_b = (_a = this.events).onDisconnect) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    }\n    dispose() {\n        if (this.isDisposed)\n            return;\n        this.isDisposed = true;\n        this.webrtcManager.dispose();\n        this.removeAllListeners();\n        this.updateStatus('disconnected');\n    }\n    updateConfig(config) {\n        Object.assign(this.config, config);\n        if (this.state.status === 'connected') {\n            this.sendSessionConfig().catch(error => {\n                this.emit('error', error);\n            });\n        }\n    }\n    setupWebRTCHandlers() {\n        this.webrtcManager.on('connected', () => {\n            this.log('WebRTC connected');\n        });\n        this.webrtcManager.on('disconnected', (reason) => {\n            var _a, _b;\n            this.log('WebRTC disconnected:', reason);\n            this.updateStatus('disconnected');\n            this.emit('disconnected');\n            (_b = (_a = this.events).onDisconnect) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n        this.webrtcManager.on('connectionFailed', (error) => {\n            var _a, _b;\n            this.log('WebRTC connection failed:', error);\n            this.updateStatus('error');\n            this.state.error = error;\n            this.emit('error', error);\n            (_b = (_a = this.events).onError) === null || _b === void 0 ? void 0 : _b.call(_a, error);\n        });\n        this.webrtcManager.on('dataChannelMessage', (data) => {\n            this.handleDataChannelMessage(data);\n        });\n        this.webrtcManager.on('audioTrackReceived', (track) => {\n            this.log('Audio track received');\n            if (this.audioElement && track.kind === 'audio') {\n                const stream = new MediaStream([track]);\n                this.audioElement.srcObject = stream;\n                this.log('Audio stream connected to element');\n            }\n        });\n    }\n    handleDataChannelMessage(data) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (typeof data !== 'string')\n            return;\n        try {\n            const message = JSON.parse(data);\n            switch (message.type) {\n                case 'conversation.item.created':\n                    if (((_a = message.item) === null || _a === void 0 ? void 0 : _a.role) === 'assistant' && ((_b = message.item) === null || _b === void 0 ? void 0 : _b.content)) {\n                        const textContent = message.item.content.find((c) => c.type === 'text');\n                        if (textContent === null || textContent === void 0 ? void 0 : textContent.text) {\n                            this.emit('textReceived', textContent.text);\n                            (_d = (_c = this.events).onTranscript) === null || _d === void 0 ? void 0 : _d.call(_c, 'assistant', textContent.text);\n                            this.state.messages.push({\n                                id: message.item.id || `msg-${Date.now()}`,\n                                role: 'assistant',\n                                text: textContent.text,\n                                timestamp: Date.now()\n                            });\n                        }\n                    }\n                    break;\n                case 'conversation.item.input_audio_transcription.completed':\n                    if (message.transcript) {\n                        this.emit('transcriptionReceived', message.transcript);\n                        (_f = (_e = this.events).onTranscript) === null || _f === void 0 ? void 0 : _f.call(_e, 'user', message.transcript);\n                    }\n                    break;\n                case 'response.audio.delta':\n                    if (message.delta) {\n                        const audioData = Uint8Array.from(atob(message.delta), c => c.charCodeAt(0));\n                        this.emit('audioReceived', audioData.buffer);\n                    }\n                    break;\n                case 'error':\n                    this.emit('error', new Error(((_g = message.error) === null || _g === void 0 ? void 0 : _g.message) || 'Unknown error'));\n                    break;\n            }\n        }\n        catch (error) {\n            this.log('Failed to handle message:', error);\n        }\n    }\n    waitForDataChannel() {\n        return __awaiter(this, arguments, void 0, function* (timeout = 10000) {\n            return new Promise((resolve, reject) => {\n                const timer = setTimeout(() => {\n                    this.webrtcManager.off('dataChannelReady', onReady);\n                    reject(new Error('Data channel failed to open'));\n                }, timeout);\n                const onReady = () => {\n                    clearTimeout(timer);\n                    resolve();\n                };\n                if (this.webrtcManager.isDataChannelOpen()) {\n                    clearTimeout(timer);\n                    resolve();\n                    return;\n                }\n                this.webrtcManager.once('dataChannelReady', onReady);\n            });\n        });\n    }\n    sendSessionConfig() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const sessionUpdate = {\n                type: 'session.update',\n                session: {\n                    model: this.config.model,\n                    modalities: this.config.modalities,\n                    instructions: this.config.instructions,\n                    voice: this.config.voice,\n                    input_audio_format: this.config.inputAudioFormat,\n                    output_audio_format: this.config.outputAudioFormat,\n                    input_audio_transcription: this.config.inputAudioFormat ? {\n                        model: 'whisper-1'\n                    } : null,\n                    turn_detection: this.config.turnDetection,\n                    temperature: this.config.temperature,\n                    max_output_tokens: this.config.maxOutputTokens === 'inf' ? null : this.config.maxOutputTokens\n                }\n            };\n            this.webrtcManager.sendData(JSON.stringify(sessionUpdate));\n        });\n    }\n    updateStatus(status) {\n        var _a, _b;\n        if (this.state.status !== status) {\n            this.state.status = status;\n            this.emit('statusChanged', status);\n            (_b = (_a = this.events).onStatusUpdate) === null || _b === void 0 ? void 0 : _b.call(_a, status);\n        }\n    }\n    log(message, ...args) {\n        if (this.config.debug) {\n            console.log(`[OpenAIRealtime] ${message}`, ...args);\n        }\n    }\n}\nexport default OpenAIRealtimeService;\n//# sourceMappingURL=OpenAIRealtimeService.js.map","references":["/Users/rodneyfranklin/Development/personal/SpanishTutor/ClaudeSpanish/spanish-tutor-mvp/node_modules/eventemitter3/index.d.ts","/Users/rodneyfranklin/Development/personal/SpanishTutor/ClaudeSpanish/spanish-tutor-mvp/packages/openai-realtime-webrtc/src/core/WebRTCManager.ts","/Users/rodneyfranklin/Development/personal/SpanishTutor/ClaudeSpanish/spanish-tutor-mvp/packages/openai-realtime-webrtc/src/types/index.ts"],"map":"{\"version\":3,\"file\":\"OpenAIRealtimeService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/core/OpenAIRealtimeService.ts\"],\"names\":[],\"mappings\":\"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\"}"}
